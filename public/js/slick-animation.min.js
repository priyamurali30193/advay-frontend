/*!
 * slick-animation.js
 * Version: 1.0.0
 * Author: Jo√£o Pereira
 * Author URL: http://joaopereira.pt
 * Licensed under the MIT license
 */
window.SlickAnimation = window.SlickAnimation || {};
(function ($) {
  // eslint-disable-next-line no-undef
  SlickAnimation = function () {
    var self = this;

    var animationEndEvent = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';
    // eslint-disable-next-line no-unused-vars
    var slickInit = false;

    self.init = function (selector) {
      $(selector).on('init', function (e, slick) {
        var firstAnimatingElements = $('div.slick-slide:first-child').find('[data-animation]');
        self.doAnimations(firstAnimatingElements);
        slickInit = true;
      });

      $(selector).on('beforeChange', function (e, slick, currentSlide, nextSlide) {
        var animatingElements = $('div.slick-slide[data-slick-index="' + nextSlide + '"]').find('[data-animation]');
        self.doAnimations(animatingElements);
      });
    };

    self.doAnimations = function (elements) {
      var animationType;
      var animationDelay;
      var animationDuration;

      elements.each(function () {
        animationType = 'animated ' + $(this).data('animation');
        animationDelay = $(this).data('delay');
        animationDuration = $(this).data('duration');

        $(this).removeClass('invisible');
        $(this).css({
          'animation-delay': animationDelay,
          'animation-duration': animationDuration
        });
        $(this).addClass(animationType).one(animationEndEvent, function () {
          $(this).removeClass(animationType);
        });
      });
    };
  };

  $.fn.slickAnimation = function () {
    // eslint-disable-next-line no-undef
    new SlickAnimation().init(this);
    return this;
  };
// eslint-disable-next-line no-undef
})(jQuery);
